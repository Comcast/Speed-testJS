<!--
  ~ /**
  ~ * Copyright 2014 Comcast Cable Communications Management, LLC
  ~ *
  ~ * Licensed under the Apache License, Version 2.0 (the "License");
  ~ * you may not use this file except in compliance with the License.
  ~ * You may obtain a copy of the License at
  ~ *
  ~ * http://www.apache.org/licenses/LICENSE-2.0
  ~ *
  ~ * Unless required by applicable law or agreed to in writing, software
  ~ * distributed under the License is distributed on an "AS IS" BASIS,
  ~ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ * See the License for the specific language governing permissions and
  ~ * limitations under the License.
  ~ */
  -->

<html>
<body>
  <table>
    <tr>
        <td>
          Select Server:
        </td>
        <td>
          <select id="selectServer"  />
        </td>
    </tr>
  </table>
</body>

<script src="lib/calculateStats.js"></script>
<script src="lib/xmlhttprequest.js"></script>
<script src="lib/webSocket.js"></script>
<script src="lib/latencyHttpTest.js"></script>
<script src="lib/latencyWebSocketTest.js"></script>
<script src="lib/downloadHttpConcurrent.js"></script>
<script src="lib/downloadHttpConcurrentProgress.js"></script>
<script src="lib/uploadHttpConcurrent.js"></script>
<script>
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {
      var data = JSON.parse(xhr.responseText);
      console.dir(data);
    }
};
xhr.open('GET', '/testplan', true);
xhr.send(null);

///latencyHttpTestSuite
/*
function latencyHttpOnComplete(result){
  console.dir(result);
}
function latencyHttpOnProgress(result){
  console.log(result);
}
function latencyHttpOnAbort(result){
  console.dir(result);
}
function latencyHttpOnTimeout(result){
  console.dir(result);
}
function latencyHttpOnError(result){
  console.dir(result);
}

var latencyHttpTestSuite = new window.latencyHttpTest('/latency', 10 ,30000, latencyHttpOnComplete, latencyHttpOnProgress,
latencyHttpOnAbort, latencyHttpOnTimeout,latencyHttpOnError);
latencyHttpTestSuite.start();
*/

//latencyWebSocketTestSuite
/*
function latencyWebSocketOnComplete(result){
  console.dir(result);
}
function latencyWebSocketOnProgress(result){
  console.log(result);
}
function latencyWebSocketOnError(result){
  console.dir(result);
}
var latencyWebSocketTest = new window.latencyWebSocketTest('ws://localhost:3001', 'GET', '0','10',3000,latencyWebSocketOnComplete,
latencyWebSocketOnProgress,latencyWebSocketOnError);
latencyWebSocketTest.start();


*/

//downloadHttpConcurrent
/*
function calculateStatsonComplete(result) {
  console.log(result);
}

function calculateStatsonError(result) {
  console.log(result);
}

function downloadHttpOnComplete(result){
  console.dir(result);
  var calculateMeanStats = new window.calculateStats(result, calculateStatsonComplete, calculateStatsonError);
  calculateMeanStats.performCalculations();
}
function downloadHttpOnProgress(result){
  console.log(result);
}
function downloadHttpOnAbort(result){
  //console.dir(result);
}
function downloadHttpOnTimeout(result){
  console.dir(result);
}
function downloadHttpOnError(result){
  console.dir(result);
}

var downloadHttpConcurrentTestSuite = new window.downloadHttpConcurrent('/download?bufferSize=10000000','GET', 4 ,15000, 10000,downloadHttpOnComplete, downloadHttpOnProgress,
downloadHttpOnAbort,downloadHttpOnTimeout,downloadHttpOnError);
downloadHttpConcurrentTestSuite.start();

*/
//uploadHttpConcurrent
/*
function uploadHttpOnComplete(result){
  console.dir(result);
  var calculateMeanStats = new window.calculateStats(result, calculateStatsonComplete, calculateStatsonError);
  calculateMeanStats.performCalculations();
}
function uploadHttpOnProgress(result){
  console.log('indexTestProgres: ' + result);
}
function uploadHttpOnAbort(result){
  //console.dir(result);
}
function uploadHttpOnTimeout(result){
  console.dir(result);
}
function uploadHttpOnError(result){
  console.dir(result);
}

var uploadHttpConcurrentTestSuite = new window.uploadHttpConcurrent('/upload','POST',2,15000,15000,uploadHttpOnComplete, uploadHttpOnProgress,
uploadHttpOnError,500000);
uploadHttpConcurrentTestSuite.start();
*/

function calculateStatsonComplete(result) {
    console.log(result);
}

function calculateStatsonError(result) {
    console.log(result);
}

function downloadHttpOnComplete(result){
    console.log('downloadHttpOnComplete');
    console.dir(result);
    var calculateMeanStats = new window.calculateStats(result, calculateStatsonComplete, calculateStatsonError);
    calculateMeanStats.performCalculations();
}
function downloadHttpOnProgress(result){
    console.log('resultOnProgress: ' + result);
}
function downloadHttpOnAbort(result){
    //console.dir(result);
}
function downloadHttpOnTimeout(result){
    console.dir(result);
}
function downloadHttpOnError(result){
    console.dir(result);
}

var downloadHttpConcurrentTestSuite = new window.downloadHttpConcurrentProgress('/download?bufferSize=10000000','GET', 6 ,15000, 10000,10,downloadHttpOnComplete, downloadHttpOnProgress,
        downloadHttpOnAbort,downloadHttpOnTimeout,downloadHttpOnError);
downloadHttpConcurrentTestSuite.start();

</script>
